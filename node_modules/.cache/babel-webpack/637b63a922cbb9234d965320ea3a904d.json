{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { r as registerInstance, h } from './index-83f2275b.js';\nimport { Logger, I18n } from '@aws-amplify/core';\nimport { A as AccessLevel } from './storage-types-f257c0f2.js';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport './constants-c8ecaa24.js';\nimport '@aws-amplify/storage';\nimport { p as putStorageObject, a as getTextSource } from './storage-helpers-1afafead.js';\nconst amplifyS3TextCss = \":host{--container-color:var(--amplify-smoke-white);--border-color:var(--amplify-light-grey);--font-size:var(--amplify-text-md);--text-color:var(--amplify-secondary-color)}.text-container{background-color:var(--container-color);border:1px solid var(--border-color);border-radius:5px;margin-bottom:10px}pre{display:block;margin:0.5rem 0;padding:0.5rem;line-height:1rem;max-height:50rem;font-size:var(--font-size);color:var(--text-color);word-break:break-all;overflow-y:scroll;overflow-x:auto}\";\nconst logger = new Logger('S3Text');\nconst AmplifyS3Text = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /** The content type header used when uploading to S3 */\n\n    this.contentType = 'text/*';\n    /** The access level of the text file */\n\n    this.level = AccessLevel.Public;\n    /** Fallback content */\n\n    this.fallbackText = Translations.TEXT_FALLBACK_CONTENT;\n  }\n\n  watchHandler() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.load();\n    })();\n  }\n\n  componentWillLoad() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.load();\n    })();\n  }\n\n  load() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        path,\n        textKey,\n        body,\n        contentType,\n        level,\n        track,\n        identityId\n      } = _this3;\n\n      if (!textKey && !path) {\n        logger.debug('empty textKey and path');\n        return;\n      }\n\n      const key = textKey || path;\n      logger.debug('loading ' + key + '...');\n\n      if (body) {\n        yield putStorageObject(textKey, body, level, track, contentType, logger);\n      }\n\n      try {\n        _this3.src = yield getTextSource(key, level, track, identityId, logger);\n      } catch (err) {\n        logger.debug(err);\n        throw new Error(err);\n      }\n    })();\n  }\n\n  render() {\n    return h(\"div\", null, h(\"div\", {\n      class: \"text-container\"\n    }, this.src ? h(\"pre\", null, this.src) : h(\"pre\", null, I18n.get(this.fallbackText))));\n  }\n\n  static get watchers() {\n    return {\n      \"textKey\": [\"watchHandler\"],\n      \"body\": [\"watchHandler\"]\n    };\n  }\n\n};\nAmplifyS3Text.style = amplifyS3TextCss;\nexport { AmplifyS3Text as amplify_s3_text };","map":{"version":3,"sources":["C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@aws-amplify/ui-components/dist/esm/amplify-s3-text.entry.js"],"names":["r","registerInstance","h","Logger","I18n","A","AccessLevel","T","Translations","p","putStorageObject","a","getTextSource","amplifyS3TextCss","logger","AmplifyS3Text","constructor","hostRef","contentType","level","Public","fallbackText","TEXT_FALLBACK_CONTENT","watchHandler","load","componentWillLoad","path","textKey","body","track","identityId","debug","key","src","err","Error","render","class","get","watchers","style","amplify_s3_text"],"mappings":";AAAA,SAASA,CAAC,IAAIC,gBAAd,EAAgCC,CAAhC,QAAyC,qBAAzC;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,mBAA7B;AACA,SAASC,CAAC,IAAIC,WAAd,QAAiC,6BAAjC;AACA,OAAO,mBAAP;AACA,SAASC,CAAC,IAAIC,YAAd,QAAkC,4BAAlC;AACA,OAAO,yBAAP;AACA,OAAO,sBAAP;AACA,SAASC,CAAC,IAAIC,gBAAd,EAAgCC,CAAC,IAAIC,aAArC,QAA0D,+BAA1D;AAEA,MAAMC,gBAAgB,GAAG,4eAAzB;AAEA,MAAMC,MAAM,GAAG,IAAIX,MAAJ,CAAW,QAAX,CAAf;AACA,MAAMY,aAAa,GAAG,MAAM;AACxBC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjBhB,IAAAA,gBAAgB,CAAC,IAAD,EAAOgB,OAAP,CAAhB;AACA;;AACA,SAAKC,WAAL,GAAmB,QAAnB;AACA;;AACA,SAAKC,KAAL,GAAab,WAAW,CAACc,MAAzB;AACA;;AACA,SAAKC,YAAL,GAAoBb,YAAY,CAACc,qBAAjC;AACH;;AACKC,EAAAA,YAAY,GAAG;AAAA;;AAAA;AACjB,YAAM,KAAI,CAACC,IAAL,EAAN;AADiB;AAEpB;;AACKC,EAAAA,iBAAiB,GAAG;AAAA;;AAAA;AACtB,YAAM,MAAI,CAACD,IAAL,EAAN;AADsB;AAEzB;;AACKA,EAAAA,IAAI,GAAG;AAAA;;AAAA;AACT,YAAM;AAAEE,QAAAA,IAAF;AAAQC,QAAAA,OAAR;AAAiBC,QAAAA,IAAjB;AAAuBV,QAAAA,WAAvB;AAAoCC,QAAAA,KAApC;AAA2CU,QAAAA,KAA3C;AAAkDC,QAAAA;AAAlD,UAAiE,MAAvE;;AACA,UAAI,CAACH,OAAD,IAAY,CAACD,IAAjB,EAAuB;AACnBZ,QAAAA,MAAM,CAACiB,KAAP,CAAa,wBAAb;AACA;AACH;;AACD,YAAMC,GAAG,GAAGL,OAAO,IAAID,IAAvB;AACAZ,MAAAA,MAAM,CAACiB,KAAP,CAAa,aAAaC,GAAb,GAAmB,KAAhC;;AACA,UAAIJ,IAAJ,EAAU;AACN,cAAMlB,gBAAgB,CAACiB,OAAD,EAAUC,IAAV,EAAgBT,KAAhB,EAAuBU,KAAvB,EAA8BX,WAA9B,EAA2CJ,MAA3C,CAAtB;AACH;;AACD,UAAI;AACA,QAAA,MAAI,CAACmB,GAAL,SAAiBrB,aAAa,CAACoB,GAAD,EAAMb,KAAN,EAAaU,KAAb,EAAoBC,UAApB,EAAgChB,MAAhC,CAA9B;AACH,OAFD,CAGA,OAAOoB,GAAP,EAAY;AACRpB,QAAAA,MAAM,CAACiB,KAAP,CAAaG,GAAb;AACA,cAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AAjBQ;AAkBZ;;AACDE,EAAAA,MAAM,GAAG;AACL,WAAQlC,CAAC,CAAC,KAAD,EAAQ,IAAR,EAAcA,CAAC,CAAC,KAAD,EAAQ;AAAEmC,MAAAA,KAAK,EAAE;AAAT,KAAR,EAAqC,KAAKJ,GAAL,GAAY/B,CAAC,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAK+B,GAAnB,CAAb,GAAyC/B,CAAC,CAAC,KAAD,EAAQ,IAAR,EAAcE,IAAI,CAACkC,GAAL,CAAS,KAAKjB,YAAd,CAAd,CAA/E,CAAf,CAAT;AACH;;AACkB,aAARkB,QAAQ,GAAG;AAAE,WAAO;AAC3B,iBAAW,CAAC,cAAD,CADgB;AAE3B,cAAQ,CAAC,cAAD;AAFmB,KAAP;AAGpB;;AAzCoB,CAA5B;AA2CAxB,aAAa,CAACyB,KAAd,GAAsB3B,gBAAtB;AAEA,SAASE,aAAa,IAAI0B,eAA1B","sourcesContent":["import { r as registerInstance, h } from './index-83f2275b.js';\nimport { Logger, I18n } from '@aws-amplify/core';\nimport { A as AccessLevel } from './storage-types-f257c0f2.js';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport './constants-c8ecaa24.js';\nimport '@aws-amplify/storage';\nimport { p as putStorageObject, a as getTextSource } from './storage-helpers-1afafead.js';\n\nconst amplifyS3TextCss = \":host{--container-color:var(--amplify-smoke-white);--border-color:var(--amplify-light-grey);--font-size:var(--amplify-text-md);--text-color:var(--amplify-secondary-color)}.text-container{background-color:var(--container-color);border:1px solid var(--border-color);border-radius:5px;margin-bottom:10px}pre{display:block;margin:0.5rem 0;padding:0.5rem;line-height:1rem;max-height:50rem;font-size:var(--font-size);color:var(--text-color);word-break:break-all;overflow-y:scroll;overflow-x:auto}\";\n\nconst logger = new Logger('S3Text');\nconst AmplifyS3Text = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        /** The content type header used when uploading to S3 */\n        this.contentType = 'text/*';\n        /** The access level of the text file */\n        this.level = AccessLevel.Public;\n        /** Fallback content */\n        this.fallbackText = Translations.TEXT_FALLBACK_CONTENT;\n    }\n    async watchHandler() {\n        await this.load();\n    }\n    async componentWillLoad() {\n        await this.load();\n    }\n    async load() {\n        const { path, textKey, body, contentType, level, track, identityId } = this;\n        if (!textKey && !path) {\n            logger.debug('empty textKey and path');\n            return;\n        }\n        const key = textKey || path;\n        logger.debug('loading ' + key + '...');\n        if (body) {\n            await putStorageObject(textKey, body, level, track, contentType, logger);\n        }\n        try {\n            this.src = await getTextSource(key, level, track, identityId, logger);\n        }\n        catch (err) {\n            logger.debug(err);\n            throw new Error(err);\n        }\n    }\n    render() {\n        return (h(\"div\", null, h(\"div\", { class: \"text-container\" }, this.src ? (h(\"pre\", null, this.src)) : (h(\"pre\", null, I18n.get(this.fallbackText))))));\n    }\n    static get watchers() { return {\n        \"textKey\": [\"watchHandler\"],\n        \"body\": [\"watchHandler\"]\n    }; }\n};\nAmplifyS3Text.style = amplifyS3TextCss;\n\nexport { AmplifyS3Text as amplify_s3_text };\n"]},"metadata":{},"sourceType":"module"}