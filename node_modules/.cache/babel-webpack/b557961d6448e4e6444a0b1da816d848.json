{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { r as registerInstance, h, H as Host } from './index-83f2275b.js';\nimport { Logger, I18n } from '@aws-amplify/core';\nimport { A as AccessLevel } from './storage-types-f257c0f2.js';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport './constants-c8ecaa24.js';\nimport '@aws-amplify/storage';\nimport { c as calcKey, p as putStorageObject, g as getStorageObject } from './storage-helpers-1afafead.js';\nconst logger = new Logger('S3ImagePicker');\nconst AmplifyS3ImagePicker = class {\n  constructor(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /** The content type header used when uploading to S3 */\n\n    this.contentType = 'binary/octet-stream';\n    /** The access level of the image */\n\n    this.level = AccessLevel.Public;\n    /** Title string value */\n\n    this.headerTitle = Translations.IMAGE_PICKER_TITLE;\n    /** Header Hint value in string */\n\n    this.headerHint = Translations.IMAGE_PICKER_HINT;\n    /** Placeholder hint that goes under the placeholder image */\n\n    this.placeholderHint = Translations.IMAGE_PICKER_PLACEHOLDER_HINT;\n    /** Upload Button Text as string */\n\n    this.buttonText = Translations.IMAGE_PICKER_BUTTON_TEXT;\n\n    this.handlePick = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (file) {\n        const {\n          path = '',\n          level,\n          track,\n          identityId,\n          fileToKey\n        } = _this;\n        const key = path + calcKey(file, fileToKey);\n\n        try {\n          yield putStorageObject(key, file, level, track, file['type'], logger);\n          _this.src = yield getStorageObject(key, level, track, identityId, logger);\n        } catch (error) {\n          logger.error(error);\n          throw new Error(error);\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  render() {\n    return h(Host, null, h(\"slot\", {\n      name: \"photo-picker\"\n    }, h(\"amplify-photo-picker\", {\n      previewSrc: this.src,\n      handleClick: this.handlePick,\n      headerTitle: I18n.get(this.headerTitle),\n      headerHint: I18n.get(this.headerHint),\n      placeholderHint: I18n.get(this.placeholderHint),\n      buttonText: I18n.get(this.buttonText)\n    })));\n  }\n\n};\nexport { AmplifyS3ImagePicker as amplify_s3_image_picker };","map":{"version":3,"sources":["C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@aws-amplify/ui-components/dist/esm/amplify-s3-image-picker.entry.js"],"names":["r","registerInstance","h","H","Host","Logger","I18n","A","AccessLevel","T","Translations","c","calcKey","p","putStorageObject","g","getStorageObject","logger","AmplifyS3ImagePicker","constructor","hostRef","contentType","level","Public","headerTitle","IMAGE_PICKER_TITLE","headerHint","IMAGE_PICKER_HINT","placeholderHint","IMAGE_PICKER_PLACEHOLDER_HINT","buttonText","IMAGE_PICKER_BUTTON_TEXT","handlePick","file","path","track","identityId","fileToKey","key","src","error","Error","render","name","previewSrc","handleClick","get","amplify_s3_image_picker"],"mappings":";AAAA,SAASA,CAAC,IAAIC,gBAAd,EAAgCC,CAAhC,EAAmCC,CAAC,IAAIC,IAAxC,QAAoD,qBAApD;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,mBAA7B;AACA,SAASC,CAAC,IAAIC,WAAd,QAAiC,6BAAjC;AACA,OAAO,mBAAP;AACA,SAASC,CAAC,IAAIC,YAAd,QAAkC,4BAAlC;AACA,OAAO,yBAAP;AACA,OAAO,sBAAP;AACA,SAASC,CAAC,IAAIC,OAAd,EAAuBC,CAAC,IAAIC,gBAA5B,EAA8CC,CAAC,IAAIC,gBAAnD,QAA2E,+BAA3E;AAEA,MAAMC,MAAM,GAAG,IAAIZ,MAAJ,CAAW,eAAX,CAAf;AACA,MAAMa,oBAAoB,GAAG,MAAM;AAC/BC,EAAAA,WAAW,CAACC,OAAD,EAAU;AAAA;;AACjBnB,IAAAA,gBAAgB,CAAC,IAAD,EAAOmB,OAAP,CAAhB;AACA;;AACA,SAAKC,WAAL,GAAmB,qBAAnB;AACA;;AACA,SAAKC,KAAL,GAAad,WAAW,CAACe,MAAzB;AACA;;AACA,SAAKC,WAAL,GAAmBd,YAAY,CAACe,kBAAhC;AACA;;AACA,SAAKC,UAAL,GAAkBhB,YAAY,CAACiB,iBAA/B;AACA;;AACA,SAAKC,eAAL,GAAuBlB,YAAY,CAACmB,6BAApC;AACA;;AACA,SAAKC,UAAL,GAAkBpB,YAAY,CAACqB,wBAA/B;;AACA,SAAKC,UAAL;AAAA,mCAAkB,WAAOC,IAAP,EAAgB;AAC9B,cAAM;AAAEC,UAAAA,IAAI,GAAG,EAAT;AAAaZ,UAAAA,KAAb;AAAoBa,UAAAA,KAApB;AAA2BC,UAAAA,UAA3B;AAAuCC,UAAAA;AAAvC,YAAqD,KAA3D;AACA,cAAMC,GAAG,GAAGJ,IAAI,GAAGtB,OAAO,CAACqB,IAAD,EAAOI,SAAP,CAA1B;;AACA,YAAI;AACA,gBAAMvB,gBAAgB,CAACwB,GAAD,EAAML,IAAN,EAAYX,KAAZ,EAAmBa,KAAnB,EAA0BF,IAAI,CAAC,MAAD,CAA9B,EAAwChB,MAAxC,CAAtB;AACA,UAAA,KAAI,CAACsB,GAAL,SAAiBvB,gBAAgB,CAACsB,GAAD,EAAMhB,KAAN,EAAaa,KAAb,EAAoBC,UAApB,EAAgCnB,MAAhC,CAAjC;AACH,SAHD,CAIA,OAAOuB,KAAP,EAAc;AACVvB,UAAAA,MAAM,CAACuB,KAAP,CAAaA,KAAb;AACA,gBAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AACH;AACJ,OAXD;;AAAA;AAAA;AAAA;AAAA;AAYH;;AACDE,EAAAA,MAAM,GAAG;AACL,WAAQxC,CAAC,CAACE,IAAD,EAAO,IAAP,EAAaF,CAAC,CAAC,MAAD,EAAS;AAAEyC,MAAAA,IAAI,EAAE;AAAR,KAAT,EAAmCzC,CAAC,CAAC,sBAAD,EAAyB;AAAE0C,MAAAA,UAAU,EAAE,KAAKL,GAAnB;AAAwBM,MAAAA,WAAW,EAAE,KAAKb,UAA1C;AAAsDR,MAAAA,WAAW,EAAElB,IAAI,CAACwC,GAAL,CAAS,KAAKtB,WAAd,CAAnE;AAA+FE,MAAAA,UAAU,EAAEpB,IAAI,CAACwC,GAAL,CAAS,KAAKpB,UAAd,CAA3G;AAAsIE,MAAAA,eAAe,EAAEtB,IAAI,CAACwC,GAAL,CAAS,KAAKlB,eAAd,CAAvJ;AAAuLE,MAAAA,UAAU,EAAExB,IAAI,CAACwC,GAAL,CAAS,KAAKhB,UAAd;AAAnM,KAAzB,CAApC,CAAd,CAAT;AACH;;AA9B8B,CAAnC;AAiCA,SAASZ,oBAAoB,IAAI6B,uBAAjC","sourcesContent":["import { r as registerInstance, h, H as Host } from './index-83f2275b.js';\nimport { Logger, I18n } from '@aws-amplify/core';\nimport { A as AccessLevel } from './storage-types-f257c0f2.js';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport './constants-c8ecaa24.js';\nimport '@aws-amplify/storage';\nimport { c as calcKey, p as putStorageObject, g as getStorageObject } from './storage-helpers-1afafead.js';\n\nconst logger = new Logger('S3ImagePicker');\nconst AmplifyS3ImagePicker = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        /** The content type header used when uploading to S3 */\n        this.contentType = 'binary/octet-stream';\n        /** The access level of the image */\n        this.level = AccessLevel.Public;\n        /** Title string value */\n        this.headerTitle = Translations.IMAGE_PICKER_TITLE;\n        /** Header Hint value in string */\n        this.headerHint = Translations.IMAGE_PICKER_HINT;\n        /** Placeholder hint that goes under the placeholder image */\n        this.placeholderHint = Translations.IMAGE_PICKER_PLACEHOLDER_HINT;\n        /** Upload Button Text as string */\n        this.buttonText = Translations.IMAGE_PICKER_BUTTON_TEXT;\n        this.handlePick = async (file) => {\n            const { path = '', level, track, identityId, fileToKey } = this;\n            const key = path + calcKey(file, fileToKey);\n            try {\n                await putStorageObject(key, file, level, track, file['type'], logger);\n                this.src = await getStorageObject(key, level, track, identityId, logger);\n            }\n            catch (error) {\n                logger.error(error);\n                throw new Error(error);\n            }\n        };\n    }\n    render() {\n        return (h(Host, null, h(\"slot\", { name: \"photo-picker\" }, h(\"amplify-photo-picker\", { previewSrc: this.src, handleClick: this.handlePick, headerTitle: I18n.get(this.headerTitle), headerHint: I18n.get(this.headerHint), placeholderHint: I18n.get(this.placeholderHint), buttonText: I18n.get(this.buttonText) }))));\n    }\n};\n\nexport { AmplifyS3ImagePicker as amplify_s3_image_picker };\n"]},"metadata":{},"sourceType":"module"}