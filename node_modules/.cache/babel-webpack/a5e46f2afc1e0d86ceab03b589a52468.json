{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Logger, Hub, I18n } from '@aws-amplify/core';\nimport { U as UsernameAlias, A as AuthState } from './auth-types-78df304e.js';\nimport Auth from '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport { U as UI_AUTH_CHANNEL, T as TOAST_AUTH_ERROR_EVENT, a as AUTH_STATE_CHANGE_EVENT, P as PHONE_EMPTY_ERROR_MESSAGE, C as COUNTRY_DIAL_CODE_SUFFIX, b as PHONE_SUFFIX } from './constants-c8ecaa24.js';\nconst logger = new Logger('helpers');\n/**\n * Finds closest element that matches the selector from the ancestor tree.\n * Trasverses through shadow DOM and slots.\n *\n * Adpated from: https://stackoverflow.com/a/56105394\n */\n\nconst closestElement = (selector, base) => {\n  function _closestFrom(el) {\n    if (!el || el === document || el === window) return null;\n    if (el.matches(selector)) return base; // return if current element matches the selector\n\n    if (el.assignedSlot) el = el.assignedSlot; // traverse up slots if slotted\n\n    const found = el.closest(selector);\n    return found ? found : _closestFrom(el.getRootNode().host); // try to traverse up shadows\n  }\n\n  return _closestFrom(base);\n};\n\nconst dispatchToastHubEvent = error => {\n  Hub.dispatch(UI_AUTH_CHANNEL, {\n    event: TOAST_AUTH_ERROR_EVENT,\n    message: I18n.get(error.message)\n  });\n};\n\nconst dispatchAuthStateChangeEvent = (nextAuthState, data) => {\n  Hub.dispatch(UI_AUTH_CHANNEL, {\n    event: AUTH_STATE_CHANGE_EVENT,\n    message: nextAuthState,\n    data\n  });\n};\n\nconst composePhoneNumberInput = phoneNumber => {\n  if (!phoneNumber.phoneNumberValue) {\n    throw new Error(PHONE_EMPTY_ERROR_MESSAGE);\n  }\n\n  const sanitizedPhoneNumberValue = phoneNumber.phoneNumberValue.replace(/[-()\\s]/g, '');\n  return `${phoneNumber.countryDialCodeValue}${sanitizedPhoneNumberValue}`;\n};\n\nconst checkUsernameAlias = usernameAlias => {\n  if (!(usernameAlias in UsernameAlias)) {\n    throw new Error(`Invalid username Alias - ${usernameAlias}. Instead use ${Object.values(UsernameAlias)}`);\n  }\n};\n\nconst onAuthUIStateChange = authStateHandler => {\n  const authUIStateHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (data) {\n      const {\n        payload\n      } = data;\n\n      switch (payload.event) {\n        case AUTH_STATE_CHANGE_EVENT:\n          if (payload.message) {\n            if (payload.message === AuthState.SignedIn) {\n              // for AuthState.SignedIn, use an Auth Guard\n              try {\n                const user = yield Auth.currentAuthenticatedUser();\n                authStateHandler(payload.message, user);\n              } catch (e) {\n                logger.error('User is not authenticated');\n              }\n            } else {\n              authStateHandler(payload.message, payload.data);\n            }\n          }\n\n          break;\n      }\n    });\n\n    return function authUIStateHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  Hub.listen(UI_AUTH_CHANNEL, authUIStateHandler);\n\n  const unsubscribe = () => {\n    // Replace user's `authStateHandler` with a noop so that we don't trigger side-effects during the async `authUIStateHandler` when unsubscribed\n    authStateHandler = () => {};\n\n    Hub.remove(UI_AUTH_CHANNEL, authUIStateHandler);\n  };\n\n  return unsubscribe;\n};\n\nconst isHintValid = field => {\n  return !(field['hint'] === null || typeof field['hint'] === 'string');\n}; // Required attributes come from https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims\n\n\nconst getRequiredAttributesMap = () => ({\n  address: {\n    label: I18n.get(Translations.ADDRESS_LABEL),\n    placeholder: I18n.get(Translations.ADDRESS_PLACEHOLDER)\n  },\n  nickname: {\n    label: I18n.get(Translations.NICKNAME_LABEL),\n    placeholder: I18n.get(Translations.NICKNAME_PLACEHOLDER)\n  },\n  birthdate: {\n    label: I18n.get(Translations.BIRTHDATE_LABEL),\n    placeholder: I18n.get(Translations.BIRTHDATE_PLACEHOLDER)\n  },\n  phone_number: {\n    label: I18n.get(Translations.PHONE_LABEL),\n    placeholder: I18n.get(Translations.PHONE_PLACEHOLDER)\n  },\n  email: {\n    lable: I18n.get(Translations.EMAIL_LABEL),\n    placeholder: I18n.get(Translations.EMAIL_PLACEHOLDER)\n  },\n  picture: {\n    label: I18n.get(Translations.PICTURE_LABEL),\n    placeholder: I18n.get(Translations.PICTURE_PLACEHOLDER)\n  },\n  family_name: {\n    label: I18n.get(Translations.FAMILY_NAME_LABEL),\n    placeholder: I18n.get(Translations.FAMILY_NAME_PLACEHOLDER)\n  },\n  preferred_username: {\n    label: I18n.get(Translations.PREFERRED_USERNAME_LABEL),\n    placeholder: I18n.get(Translations.PREFERRED_USERNAME_PLACEHOLDER)\n  },\n  gender: {\n    label: I18n.get(Translations.GENDER_LABEL),\n    placeholder: I18n.get(Translations.GENDER_PLACEHOLDER)\n  },\n  profile: {\n    label: I18n.get(Translations.PROFILE_LABEL),\n    placeholder: I18n.get(Translations.PROFILE_PLACEHOLDER)\n  },\n  given_name: {\n    label: I18n.get(Translations.GIVEN_NAME_LABEL),\n    placeholder: I18n.get(Translations.GIVEN_NAME_PLACEHOLDER)\n  },\n  zoneinfo: {\n    label: I18n.get(Translations.ZONEINFO_LABEL),\n    placeholder: I18n.get(Translations.ZONEINFO_PLACEHOLDER)\n  },\n  locale: {\n    label: I18n.get(Translations.LOCALE_LABEL),\n    placeholder: I18n.get(Translations.LOCALE_PLACEHOLDER)\n  },\n  updated_at: {\n    label: I18n.get(Translations.UPDATED_AT_LABEL),\n    placeholder: I18n.get(Translations.UPDATED_AT_PLACEHOLDER)\n  },\n  middle_name: {\n    label: I18n.get(Translations.MIDDLE_NAME_LABEL),\n    placeholder: I18n.get(Translations.MIDDLE_NAME_PLACEHOLDER)\n  },\n  website: {\n    label: I18n.get(Translations.WEBSITE_LABEL),\n    placeholder: I18n.get(Translations.WEBSITE_PLACEHOLDER)\n  },\n  name: {\n    label: I18n.get(Translations.NAME_LABEL),\n    placeholder: I18n.get(Translations.NAME_PLACEHOLDER)\n  }\n});\n\nfunction handlePhoneNumberChange(event, phoneNumber) {\n  const name = event.target.name;\n  const value = event.target.value;\n  /** Cognito expects to have a string be passed when signing up. Since the Select input is separate\n   * input from the phone number input, we need to first capture both components values and combined\n   * them together.\n   */\n\n  if (name === COUNTRY_DIAL_CODE_SUFFIX) {\n    phoneNumber.countryDialCodeValue = value;\n  }\n\n  if (name === PHONE_SUFFIX) {\n    phoneNumber.phoneNumberValue = value;\n  }\n}\n\nexport { dispatchToastHubEvent as a, composePhoneNumberInput as b, checkUsernameAlias as c, dispatchAuthStateChangeEvent as d, closestElement as e, getRequiredAttributesMap as g, handlePhoneNumberChange as h, isHintValid as i, onAuthUIStateChange as o };","map":{"version":3,"sources":["C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@aws-amplify/ui-components/dist/esm/helpers-9703fe65.js"],"names":["Logger","Hub","I18n","U","UsernameAlias","A","AuthState","Auth","T","Translations","UI_AUTH_CHANNEL","TOAST_AUTH_ERROR_EVENT","a","AUTH_STATE_CHANGE_EVENT","P","PHONE_EMPTY_ERROR_MESSAGE","C","COUNTRY_DIAL_CODE_SUFFIX","b","PHONE_SUFFIX","logger","closestElement","selector","base","_closestFrom","el","document","window","matches","assignedSlot","found","closest","getRootNode","host","dispatchToastHubEvent","error","dispatch","event","message","get","dispatchAuthStateChangeEvent","nextAuthState","data","composePhoneNumberInput","phoneNumber","phoneNumberValue","Error","sanitizedPhoneNumberValue","replace","countryDialCodeValue","checkUsernameAlias","usernameAlias","Object","values","onAuthUIStateChange","authStateHandler","authUIStateHandler","payload","SignedIn","user","currentAuthenticatedUser","e","listen","unsubscribe","remove","isHintValid","field","getRequiredAttributesMap","address","label","ADDRESS_LABEL","placeholder","ADDRESS_PLACEHOLDER","nickname","NICKNAME_LABEL","NICKNAME_PLACEHOLDER","birthdate","BIRTHDATE_LABEL","BIRTHDATE_PLACEHOLDER","phone_number","PHONE_LABEL","PHONE_PLACEHOLDER","email","lable","EMAIL_LABEL","EMAIL_PLACEHOLDER","picture","PICTURE_LABEL","PICTURE_PLACEHOLDER","family_name","FAMILY_NAME_LABEL","FAMILY_NAME_PLACEHOLDER","preferred_username","PREFERRED_USERNAME_LABEL","PREFERRED_USERNAME_PLACEHOLDER","gender","GENDER_LABEL","GENDER_PLACEHOLDER","profile","PROFILE_LABEL","PROFILE_PLACEHOLDER","given_name","GIVEN_NAME_LABEL","GIVEN_NAME_PLACEHOLDER","zoneinfo","ZONEINFO_LABEL","ZONEINFO_PLACEHOLDER","locale","LOCALE_LABEL","LOCALE_PLACEHOLDER","updated_at","UPDATED_AT_LABEL","UPDATED_AT_PLACEHOLDER","middle_name","MIDDLE_NAME_LABEL","MIDDLE_NAME_PLACEHOLDER","website","WEBSITE_LABEL","WEBSITE_PLACEHOLDER","name","NAME_LABEL","NAME_PLACEHOLDER","handlePhoneNumberChange","target","value","c","d","g","h","i","o"],"mappings":"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","sourcesContent":["import { Logger, Hub, I18n } from '@aws-amplify/core';\nimport { U as UsernameAlias, A as AuthState } from './auth-types-78df304e.js';\nimport Auth from '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport { U as UI_AUTH_CHANNEL, T as TOAST_AUTH_ERROR_EVENT, a as AUTH_STATE_CHANGE_EVENT, P as PHONE_EMPTY_ERROR_MESSAGE, C as COUNTRY_DIAL_CODE_SUFFIX, b as PHONE_SUFFIX } from './constants-c8ecaa24.js';\n\nconst logger = new Logger('helpers');\n/**\n * Finds closest element that matches the selector from the ancestor tree.\n * Trasverses through shadow DOM and slots.\n *\n * Adpated from: https://stackoverflow.com/a/56105394\n */\nconst closestElement = (selector, base) => {\n    function _closestFrom(el) {\n        if (!el || el === document || el === window)\n            return null;\n        if (el.matches(selector))\n            return base; // return if current element matches the selector\n        if (el.assignedSlot)\n            el = el.assignedSlot; // traverse up slots if slotted\n        const found = el.closest(selector);\n        return found ? found : _closestFrom(el.getRootNode().host); // try to traverse up shadows\n    }\n    return _closestFrom(base);\n};\nconst dispatchToastHubEvent = (error) => {\n    Hub.dispatch(UI_AUTH_CHANNEL, {\n        event: TOAST_AUTH_ERROR_EVENT,\n        message: I18n.get(error.message),\n    });\n};\nconst dispatchAuthStateChangeEvent = (nextAuthState, data) => {\n    Hub.dispatch(UI_AUTH_CHANNEL, {\n        event: AUTH_STATE_CHANGE_EVENT,\n        message: nextAuthState,\n        data,\n    });\n};\nconst composePhoneNumberInput = (phoneNumber) => {\n    if (!phoneNumber.phoneNumberValue) {\n        throw new Error(PHONE_EMPTY_ERROR_MESSAGE);\n    }\n    const sanitizedPhoneNumberValue = phoneNumber.phoneNumberValue.replace(/[-()\\s]/g, '');\n    return `${phoneNumber.countryDialCodeValue}${sanitizedPhoneNumberValue}`;\n};\nconst checkUsernameAlias = (usernameAlias) => {\n    if (!(usernameAlias in UsernameAlias)) {\n        throw new Error(`Invalid username Alias - ${usernameAlias}. Instead use ${Object.values(UsernameAlias)}`);\n    }\n};\nconst onAuthUIStateChange = (authStateHandler) => {\n    const authUIStateHandler = async (data) => {\n        const { payload } = data;\n        switch (payload.event) {\n            case AUTH_STATE_CHANGE_EVENT:\n                if (payload.message) {\n                    if (payload.message === AuthState.SignedIn) {\n                        // for AuthState.SignedIn, use an Auth Guard\n                        try {\n                            const user = await Auth.currentAuthenticatedUser();\n                            authStateHandler(payload.message, user);\n                        }\n                        catch (e) {\n                            logger.error('User is not authenticated');\n                        }\n                    }\n                    else {\n                        authStateHandler(payload.message, payload.data);\n                    }\n                }\n                break;\n        }\n    };\n    Hub.listen(UI_AUTH_CHANNEL, authUIStateHandler);\n    const unsubscribe = () => {\n        // Replace user's `authStateHandler` with a noop so that we don't trigger side-effects during the async `authUIStateHandler` when unsubscribed\n        authStateHandler = () => { };\n        Hub.remove(UI_AUTH_CHANNEL, authUIStateHandler);\n    };\n    return unsubscribe;\n};\nconst isHintValid = field => {\n    return !(field['hint'] === null || typeof field['hint'] === 'string');\n};\n// Required attributes come from https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims\nconst getRequiredAttributesMap = () => ({\n    address: {\n        label: I18n.get(Translations.ADDRESS_LABEL),\n        placeholder: I18n.get(Translations.ADDRESS_PLACEHOLDER),\n    },\n    nickname: {\n        label: I18n.get(Translations.NICKNAME_LABEL),\n        placeholder: I18n.get(Translations.NICKNAME_PLACEHOLDER),\n    },\n    birthdate: {\n        label: I18n.get(Translations.BIRTHDATE_LABEL),\n        placeholder: I18n.get(Translations.BIRTHDATE_PLACEHOLDER),\n    },\n    phone_number: {\n        label: I18n.get(Translations.PHONE_LABEL),\n        placeholder: I18n.get(Translations.PHONE_PLACEHOLDER),\n    },\n    email: {\n        lable: I18n.get(Translations.EMAIL_LABEL),\n        placeholder: I18n.get(Translations.EMAIL_PLACEHOLDER),\n    },\n    picture: {\n        label: I18n.get(Translations.PICTURE_LABEL),\n        placeholder: I18n.get(Translations.PICTURE_PLACEHOLDER),\n    },\n    family_name: {\n        label: I18n.get(Translations.FAMILY_NAME_LABEL),\n        placeholder: I18n.get(Translations.FAMILY_NAME_PLACEHOLDER),\n    },\n    preferred_username: {\n        label: I18n.get(Translations.PREFERRED_USERNAME_LABEL),\n        placeholder: I18n.get(Translations.PREFERRED_USERNAME_PLACEHOLDER),\n    },\n    gender: {\n        label: I18n.get(Translations.GENDER_LABEL),\n        placeholder: I18n.get(Translations.GENDER_PLACEHOLDER),\n    },\n    profile: {\n        label: I18n.get(Translations.PROFILE_LABEL),\n        placeholder: I18n.get(Translations.PROFILE_PLACEHOLDER),\n    },\n    given_name: {\n        label: I18n.get(Translations.GIVEN_NAME_LABEL),\n        placeholder: I18n.get(Translations.GIVEN_NAME_PLACEHOLDER),\n    },\n    zoneinfo: {\n        label: I18n.get(Translations.ZONEINFO_LABEL),\n        placeholder: I18n.get(Translations.ZONEINFO_PLACEHOLDER),\n    },\n    locale: {\n        label: I18n.get(Translations.LOCALE_LABEL),\n        placeholder: I18n.get(Translations.LOCALE_PLACEHOLDER),\n    },\n    updated_at: {\n        label: I18n.get(Translations.UPDATED_AT_LABEL),\n        placeholder: I18n.get(Translations.UPDATED_AT_PLACEHOLDER),\n    },\n    middle_name: {\n        label: I18n.get(Translations.MIDDLE_NAME_LABEL),\n        placeholder: I18n.get(Translations.MIDDLE_NAME_PLACEHOLDER),\n    },\n    website: {\n        label: I18n.get(Translations.WEBSITE_LABEL),\n        placeholder: I18n.get(Translations.WEBSITE_PLACEHOLDER),\n    },\n    name: {\n        label: I18n.get(Translations.NAME_LABEL),\n        placeholder: I18n.get(Translations.NAME_PLACEHOLDER),\n    },\n});\nfunction handlePhoneNumberChange(event, phoneNumber) {\n    const name = event.target.name;\n    const value = event.target.value;\n    /** Cognito expects to have a string be passed when signing up. Since the Select input is separate\n     * input from the phone number input, we need to first capture both components values and combined\n     * them together.\n     */\n    if (name === COUNTRY_DIAL_CODE_SUFFIX) {\n        phoneNumber.countryDialCodeValue = value;\n    }\n    if (name === PHONE_SUFFIX) {\n        phoneNumber.phoneNumberValue = value;\n    }\n}\n\nexport { dispatchToastHubEvent as a, composePhoneNumberInput as b, checkUsernameAlias as c, dispatchAuthStateChangeEvent as d, closestElement as e, getRequiredAttributesMap as g, handlePhoneNumberChange as h, isHintValid as i, onAuthUIStateChange as o };\n"]},"metadata":{},"sourceType":"module"}