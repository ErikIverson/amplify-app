{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { d as NO_STORAGE_MODULE_FOUND } from './constants-c8ecaa24.js';\nimport { Storage } from '@aws-amplify/storage';\nconst imageFileType = new Set(['apng', 'bmp', 'gif', 'ico', 'cur', 'jpg', 'jpeg', 'jfif', 'pjpeg', 'pjp', 'png', 'svg', 'tif', 'tiff', 'webp']);\n\nconst calcKey = (file, fileToKey) => {\n  const {\n    name,\n    size,\n    type\n  } = file;\n  let key = encodeURI(name);\n\n  if (fileToKey) {\n    if (typeof fileToKey === 'string') {\n      key = fileToKey;\n    } else if (typeof fileToKey === 'function') {\n      key = fileToKey({\n        name,\n        size,\n        type\n      });\n    } else {\n      key = encodeURI(JSON.stringify(fileToKey));\n    }\n\n    if (!key) {\n      key = 'empty_key';\n    }\n  }\n\n  return key.replace(/\\s/g, '_');\n};\n\nconst getStorageObject = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (key, level, track, identityId, logger) {\n    if (!Storage || typeof Storage.get !== 'function') {\n      throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n\n    try {\n      const src = yield Storage.get(key, {\n        level,\n        track,\n        identityId\n      });\n      logger.debug('Storage image get', src);\n      return src;\n    } catch (error) {\n      throw new Error(error);\n    }\n  });\n\n  return function getStorageObject(_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nconst readFileAsync = blob => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      resolve(reader.result);\n    };\n\n    reader.onerror = () => {\n      reject('Failed to read file!');\n      reader.abort();\n    };\n\n    reader.readAsText(blob);\n  });\n};\n\nconst getTextSource = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (key, level, track, identityId, logger) {\n    if (!Storage || typeof Storage.get !== 'function') {\n      throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n\n    try {\n      const textSrc = yield Storage.get(key, {\n        download: true,\n        level,\n        track,\n        identityId\n      });\n      logger.debug(textSrc);\n      const text = yield readFileAsync(textSrc['Body']);\n      return text;\n    } catch (error) {\n      throw new Error(error);\n    }\n  });\n\n  return function getTextSource(_x6, _x7, _x8, _x9, _x10) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nconst putStorageObject = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(function* (key, body, level, track, contentType, logger) {\n    if (!Storage || typeof Storage.put !== 'function') {\n      throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n\n    try {\n      const data = yield Storage.put(key, body, {\n        contentType,\n        level,\n        track\n      });\n      logger.debug('Upload data', data);\n    } catch (error) {\n      throw new Error(error);\n    }\n  });\n\n  return function putStorageObject(_x11, _x12, _x13, _x14, _x15, _x16) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport { getTextSource as a, calcKey as c, getStorageObject as g, imageFileType as i, putStorageObject as p };","map":{"version":3,"sources":["C:/Users/eriki/Documents/GitHub/amplify-app/node_modules/@aws-amplify/ui-components/dist/esm/storage-helpers-1afafead.js"],"names":["d","NO_STORAGE_MODULE_FOUND","Storage","imageFileType","Set","calcKey","file","fileToKey","name","size","type","key","encodeURI","JSON","stringify","replace","getStorageObject","level","track","identityId","logger","get","Error","src","debug","error","readFileAsync","blob","Promise","resolve","reject","reader","FileReader","onload","result","onerror","abort","readAsText","getTextSource","textSrc","download","text","putStorageObject","body","contentType","put","data","a","c","g","i","p"],"mappings":"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","sourcesContent":["import { d as NO_STORAGE_MODULE_FOUND } from './constants-c8ecaa24.js';\nimport { Storage } from '@aws-amplify/storage';\n\nconst imageFileType = new Set([\n    'apng',\n    'bmp',\n    'gif',\n    'ico',\n    'cur',\n    'jpg',\n    'jpeg',\n    'jfif',\n    'pjpeg',\n    'pjp',\n    'png',\n    'svg',\n    'tif',\n    'tiff',\n    'webp',\n]);\nconst calcKey = (file, fileToKey) => {\n    const { name, size, type } = file;\n    let key = encodeURI(name);\n    if (fileToKey) {\n        if (typeof fileToKey === 'string') {\n            key = fileToKey;\n        }\n        else if (typeof fileToKey === 'function') {\n            key = fileToKey({ name, size, type });\n        }\n        else {\n            key = encodeURI(JSON.stringify(fileToKey));\n        }\n        if (!key) {\n            key = 'empty_key';\n        }\n    }\n    return key.replace(/\\s/g, '_');\n};\nconst getStorageObject = async (key, level, track, identityId, logger) => {\n    if (!Storage || typeof Storage.get !== 'function') {\n        throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n    try {\n        const src = await Storage.get(key, { level, track, identityId });\n        logger.debug('Storage image get', src);\n        return src;\n    }\n    catch (error) {\n        throw new Error(error);\n    }\n};\nconst readFileAsync = (blob) => {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject('Failed to read file!');\n            reader.abort();\n        };\n        reader.readAsText(blob);\n    });\n};\nconst getTextSource = async (key, level, track, identityId, logger) => {\n    if (!Storage || typeof Storage.get !== 'function') {\n        throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n    try {\n        const textSrc = await Storage.get(key, {\n            download: true,\n            level,\n            track,\n            identityId,\n        });\n        logger.debug(textSrc);\n        const text = (await readFileAsync(textSrc['Body']));\n        return text;\n    }\n    catch (error) {\n        throw new Error(error);\n    }\n};\nconst putStorageObject = async (key, body, level, track, contentType, logger) => {\n    if (!Storage || typeof Storage.put !== 'function') {\n        throw new Error(NO_STORAGE_MODULE_FOUND);\n    }\n    try {\n        const data = await Storage.put(key, body, {\n            contentType,\n            level,\n            track,\n        });\n        logger.debug('Upload data', data);\n    }\n    catch (error) {\n        throw new Error(error);\n    }\n};\n\nexport { getTextSource as a, calcKey as c, getStorageObject as g, imageFileType as i, putStorageObject as p };\n"]},"metadata":{},"sourceType":"module"}